<div class="py-4 px-0" id="material-view">
  <div class="container">
    <ng-container *ngIf="educationalMaterial">
      <div class="row mb-4">
        <div class="col-lg-6">
          <h1>{{ materialName }}</h1>
        </div>

        <div class="col-lg-6 text-lg-right">
          <div class="material-actions">
            <a class="btn btn-link" [href]="downloadUrl" download>
              <i class="fa fa-fw fa-download text-dark" aria-hidden="true"></i>
              {{ 'demo.educationalMaterial.download' | translate }}
            </a>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-3">
          <div class="material-sidebar-left">
            <div class="row">
              <div class="col-auto col-md-12 text-center text-sm-left">
                <img [src]="educationalMaterial.thumbnail ? educationalMaterial.thumbnail : 'assets/img/esitys.png'" class="img-fluid mb-4">
              </div>

              <div class="col">
                <ul class="list-unstyled">
                  <li *ngFor="let type of educationalMaterial.learningResourceTypes">
                    <img src="assets/img/icons/learning-resource-types/{{ type.learningresourcetypekey }}.svg"> {{ type.value }}
                  </li>
                  <!--<li class="text-muted">
                    <i class="fa fa-fw fa-eye" aria-hidden="true"></i>
                    0 {{ 'demo.educationalMaterial.viewCount' | translate }}
                  </li>
                  <li class="text-muted">
                    <i class="fa fa-fw fa-download" aria-hidden="true"></i>
                    0 {{ 'demo.educationalMaterial.downloadCount' | translate }}
                  </li>-->
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-9">
          <div class="material-content">
            <div class="material-description">
              <ul class="list-unstyled authors">
                <li *ngFor="let author of educationalMaterial.authors">
                  <ng-container *ngIf="author.authorname !== ''">
                    {{ author.authorname }}
                    <ng-container *ngIf="author.organization">({{ author.organization }})</ng-container>
                  </ng-container>
                  <ng-container *ngIf="author.authorname === ''">{{ author.organization }}</ng-container>
                </li>
              </ul>

              <div class="datetimes">
                <span class="datetime-item">
                  <strong>{{ 'demo.educationalMaterial.createdAt' | translate }}:</strong>
                  <time [attr.datetime]="educationalMaterial.createdAt | date:'yyyy-MM-dd HH:mm'">{{ educationalMaterial.createdAt | date:'d.M.yyyy HH:mm' }}</time>
                </span>

                <span class="datetime-item" *ngIf="educationalMaterial.publishedAt">
                  <strong>{{ 'demo.educationalMaterial.publishedAt' | translate }}:</strong>
                  <time [attr.datetime]="educationalMaterial.publishedAt | date:'yyyy-MM-dd HH:mm'">{{ educationalMaterial.publishedAt | date:'d.M.yyyy HH:mm' }}</time>
                </span>

                <span class="datetime-item" *ngIf="educationalMaterial.updatedAt">
                  <strong>{{ 'demo.educationalMaterial.updatedAt' | translate }}:</strong>
                  <time [attr.datetime]="educationalMaterial.updatedAt | date:'yyyy-MM-dd HH:mm'">{{ educationalMaterial.updatedAt | date:'d.M.yyyy HH:mm' }}</time>
                </span>
              </div>

              <p *ngIf="description">{{ description }}</p>
            </div>

            <div class="list-files mb-4" *ngIf="materials.length > 0">
              <div class="row no-gutters">
                <div class="col-3">
                  <div class="btn-group-vertical" role="group">
                    <ng-container *ngFor="let material of materials">
                      <button type="button" class="btn btn-file text-dark" [ngClass]="material === previewMaterial ? 'active' : ''" (click)="setPreviewMaterial(material)">
                        {{ material.displayName[lang] }}
                      </button>
                    </ng-container>
                  </div>
                </div>

                <div class="col-9">
                  <app-educational-material-preview [material]="previewMaterial" *ngIf="!previewMaterial.link"></app-educational-material-preview>

                  <a *ngIf="previewMaterial.link" [href]="previewMaterial.link" class="btn btn-secondary" target="_blank" rel="noopener">{{ 'demo.educationalMaterial.preview.openInNewTab' | translate }}</a>
                </div>
              </div>
            </div>

            <div class="form-group form-row align-items-end">
              <div class="col">
                <label for="embedCodeInput">{{ 'demo.educationalMaterial.embed.label' | translate }}</label>
                <input type="text" class="form-control" id="embedCodeInput" [value]="embedCode" readonly #embedCodeInput>
              </div>
              <div class="col-auto">
                <button
                  class="btn"
                  type="button"
                  [ngxClipboard]="embedCodeInput"
                  (cbOnSuccess)="embedCodeCopied = true"
                  [ngClass]="{
                    'btn-outline-secondary': !embedCodeCopied,
                    'btn-success': embedCodeCopied
                  }"
                >
                  <ng-container *ngIf="!embedCodeCopied; else copied">{{ 'demo.educationalMaterial.embed.copy' | translate }}</ng-container>
                  <ng-template #copied>{{ 'demo.educationalMaterial.embed.copied' | translate }}</ng-template>
                </button>
              </div>
            </div>

            <div class="row material-metadata">
              <div *ngIf="educationalMaterial.timeRequired" class="col-auto">
                <h4>{{ 'demo.educationalMaterial.timeRequired' | translate }}</h4>
                {{ educationalMaterial.timeRequired }}
              </div>

              <div *ngIf="educationalMaterial.publisher" class="col-auto">
                <h4>{{ 'demo.educationalMaterial.publisher' | translate }}</h4>
                {{ educationalMaterial.publisher }}
              </div>

              <div class="col-auto">
                <h4>{{ 'demo.educationalMaterial.license' | translate }}</h4>
                {{ educationalMaterial.license }}
              </div>

              <div class="col-12">
                <h4>{{ 'demo.educationalMaterial.keywords' | translate }}</h4>

                <div class="tags">
                  <button *ngFor="let keyword of educationalMaterial.keywords" type="button" class="btn btn-light disabled">
                    {{ keyword.value }}
                  </button>
                </div>
              </div>

              <accordion>
                <accordion-group heading="Lisää kuvailutietoja">
                  <div class="col-12">
                    <h4>{{ 'demo.educationalMaterial.eduLevel' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let level of educationalMaterial.educationalLevels" type="button" class="btn btn-light disabled">
                        {{ level.value }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.educationalRoles?.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.educationalRole' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let role of educationalMaterial.educationalRoles" type="button" class="btn btn-light disabled">
                        {{ role.educationalrole }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.educationalUses?.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.educationalUse' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let use of educationalMaterial.educationalUses" type="button" class="btn btn-light disabled">
                        {{ use.value }}
                      </button>
                    </div>
                  </div>

                  <!-- early childhood education -->
                  <div *ngIf="educationalMaterial.earlyChildhoodEducationSubjects.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.earlyChildhoodEducationSubjects' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let subject of educationalMaterial.earlyChildhoodEducationSubjects" type="button" class="btn btn-light disabled">
                        {{ subject.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.earlyChildhoodEducationObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.earlyChildhoodEducationObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.earlyChildhoodEducationObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- pre primary education -->
                  <div *ngIf="educationalMaterial.prePrimaryEducationSubjects.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.prePrimaryEducationSubjects' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let subject of educationalMaterial.prePrimaryEducationSubjects" type="button" class="btn btn-light disabled">
                        {{ subject.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.prePrimaryEducationObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.prePrimaryEducationObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.prePrimaryEducationObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- basic education -->
                  <div *ngIf="educationalMaterial.basicStudySubjects.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.basicStudySubjects' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let subject of educationalMaterial.basicStudySubjects" type="button" class="btn btn-light disabled">
                        {{ subject.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.basicStudyObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.basicStudyObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.basicStudyObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.basicStudyContents.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.basicStudyContents' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let content of educationalMaterial.basicStudyContents" type="button" class="btn btn-light disabled">
                        {{ content.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- upper secondary education -->
                  <div *ngIf="educationalMaterial.upperSecondarySchoolSubjects.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.upperSecondarySchoolSubjects' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let subject of educationalMaterial.upperSecondarySchoolSubjects" type="button" class="btn btn-light disabled">
                        {{ subject.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.upperSecondarySchoolObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.upperSecondarySchoolObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.upperSecondarySchoolObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- upper secondary education (new) -->
                  <div *ngIf="educationalMaterial.upperSecondarySchoolSubjectsNew.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.upperSecondarySchoolSubjectsNew' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let subject of educationalMaterial.upperSecondarySchoolSubjectsNew" type="button" class="btn btn-light disabled">
                        {{ subject.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.upperSecondarySchoolModulesNew.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.upperSecondarySchoolModulesNew' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let module of educationalMaterial.upperSecondarySchoolModulesNew" type="button" class="btn btn-light disabled">
                        {{ module.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.upperSecondarySchoolObjectivesNew.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.upperSecondarySchoolObjectivesNew' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.upperSecondarySchoolObjectivesNew" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.upperSecondarySchoolContentsNew.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.upperSecondarySchoolContentsNew' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let content of educationalMaterial.upperSecondarySchoolContentsNew" type="button" class="btn btn-light disabled">
                        {{ content.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- vocational education -->
                  <div *ngIf="educationalMaterial.vocationalDegrees.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.vocationalDegrees' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let degree of educationalMaterial.vocationalDegrees" type="button" class="btn btn-light disabled">
                        {{ degree.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.vocationalUnits.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.vocationalUnits' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let unit of educationalMaterial.vocationalUnits" type="button" class="btn btn-light disabled">
                        {{ unit.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.vocationalEducationObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.vocationalEducationObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.vocationalEducationObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- self-motivated education -->
                  <div *ngIf="educationalMaterial.selfMotivatedEducationSubjects.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.selfMotivatedEducationSubjects' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let subject of educationalMaterial.selfMotivatedEducationSubjects" type="button" class="btn btn-light disabled">
                        {{ subject.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.selfMotivatedEducationObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.selfMotivatedEducationObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.selfMotivatedEducationObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- higher education -->
                  <div *ngIf="educationalMaterial.branchesOfScience.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.branchesOfScience' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let branch of educationalMaterial.branchesOfScience" type="button" class="btn btn-light disabled">
                        {{ branch.targetName }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.scienceBranchObjectives.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.scienceBranchObjectives' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let objective of educationalMaterial.scienceBranchObjectives" type="button" class="btn btn-light disabled">
                        {{ objective.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- prerequisites -->
                  <div *ngIf="educationalMaterial.prerequisites.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.prerequisites' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let prerequisite of educationalMaterial.prerequisites" type="button" class="btn btn-light disabled">
                        {{ prerequisite.targetName }}
                      </button>
                    </div>
                  </div>

                  <!-- accessibility -->
                  <div *ngIf="educationalMaterial.accessibilityFeatures.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.accessibilityFeatures' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let feature of educationalMaterial.accessibilityFeatures" type="button" class="btn btn-light disabled">
                        {{ feature.value }}
                      </button>
                    </div>
                  </div>

                  <div *ngIf="educationalMaterial.accessibilityHazards.length > 0" class="col-12">
                    <h4>{{ 'demo.educationalMaterial.accessibilityHazard' | translate }}</h4>

                    <div class="tags">
                      <button *ngFor="let hazard of educationalMaterial.accessibilityHazards" type="button" class="btn btn-light disabled">
                        {{ hazard.value }}
                      </button>
                    </div>
                  </div>
                </accordion-group>
              </accordion>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
