version: '3'
services:
  provider-rest-prod:
    build:
      context: ./provider-rest
      dockerfile: prod.Dockerfile
    image: provider-rest-prod:latest
    container_name: provider-rest-prod
    restart: always
    ports:
      - 8001:8001
    environment:
      SERVER_PORT: '8001'
      SPRING_PROFILES_ACTIVE: 'prod'
    networks:
      - network-provider-prod

#  TEMPORARILY DISABLED SERVICES
#
#  resolver-data:
#    build:
#      context: ./resolver-data
#      dockerfile: Dockerfile
#    image: resolver-data:latest
#    container_name: resolver-data
#    restart: always
#    ports:
#      - 8002:8002
#    environment:
#      SPRING_PROFILES_ACTIVE: 'prod'
#      SPRING_DATASOURCE_URL: 'jdbc:postgresql://86.50.27.23:5433/aoe'
#      SPRING_DATASOURCE_USERNAME: 'resolver'
#      SPRING_DATASOURCE_PASSWORD: 'postgres'
#    networks:
#      - resolver-network
#
#  resolver-rest:
#    build:
#      context: ./resolver-rest
#      dockerfile: Dockerfile
#    image: resolver-rest:latest
#    container_name: resolver-rest
#    restart: always
#    ports:
#      - 8003:8003
#    depends_on:
#      - resolver-data
#    environment:
#      SPRING_PROFILES_ACTIVE: 'prod'
#      AOE_RESOLVER-DATA_URL: 'http://resolver-data:8002'
#    networks:
#      - resolver-network

networks:
  network-provider-prod:
    driver: bridge
#  resolver-network:
#    driver: bridge
